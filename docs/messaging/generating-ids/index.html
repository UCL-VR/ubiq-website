<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://ubiq.online/fonts/vendor/nunito-sans/nunito-sans-v11-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://ubiq.online/fonts/vendor/nunito/nunito-v22-latin-700.woff2 type=font/woff2 crossorigin><link rel=preconnect href=https://KMWY81ZWS3-dsn.algolia.net crossorigin><script integrity="sha512-RBYr6Ld4w1yVqaACrgrBLQfPgGhj/1jyacA74WxJ1KM6KVcSWymwrdDwb3HDcdpwiNJ5yssot1He0U9vXoQVlg==">(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=/main.2d475f10e5b9f77c78db0bede08bfbe837a2fac3248bf7fbfede3aaefe3d93e1921d6fb9a8a6f0812476f859cdbc75077c1e84ae61e1f32892e3789e3f76ddea.css integrity="sha512-LUdfEOW593x42wvt4Iv76Dei+sMki/f7/t46rv49k+GSHW+5qKbwgSR2+FnNvHUHfB6ErmHh8yiS43ieP3bd6g==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Generating Unique Ids Ubiq</title><meta name=description content="A Unity networking library for research, teaching and development, maintained by the Virtual Environments and Computer Graphics group at UCL. Ubiq is 100% free and open source."><link rel=canonical href=https://ubiq.online/docs/messaging/generating-ids/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Generating Unique Ids"><meta property="og:description" content="Unique Ids The main considerations of Object Ids are the practices for generating UUIds, collision probabilities and bit sizes.
Collision Probability Each client must be able to generate new Ids independently, to avoid dependencies on a server in peer-to-peer situations, and to avoid introducing deadlocks with the Unity programming model (such as needing a server to respond before all Start() calls can finish).
The probability of collisions between two independently well-generated identifiers is the Birthday Problem."><meta property="og:url" content="https://ubiq.online/docs/messaging/generating-ids/"><meta property="og:site_name" content="Ubiq"><meta property="article:published_time" content="2020-09-21T16:00:43+02:00"><meta property="article:modified_time" content="2023-10-09T14:24:45+01:00"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="640"><meta property="og:image:alt" content="Generating Unique Ids"><meta property="og:image" content="https://ubiq.online/images/banner.png"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="640"><meta property="og:image:alt" content="Ubiq"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Generating Unique Ids"><meta name=twitter:description content><meta name=twitter:image content><meta name=twitter:image:alt content="Generating Unique Ids"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://ubiq.online/#/schema/organization/1","name":"Ubiq","url":"https://ubiq.online/","sameAs":["https://github.com/UCL-VR/ubiq"],"logo":{"@type":"ImageObject","@id":"https://ubiq.online/#/schema/image/1","url":"https://ubiq.online/images/logos/ubiq-logo.png","width":512,"height":512,"caption":"Ubiq"},"image":{"@id":"https://ubiq.online/#/schema/image/1"}},{"@type":"WebSite","@id":"https://ubiq.online/#/schema/website/1","url":"https://ubiq.online/","name":"Ubiq","description":"A Unity networking library for research, teaching and development, maintained by the Virtual Environments and Computer Graphics group at UCL. Ubiq is 100% free and open source.","publisher":{"@id":"https://ubiq.online/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://ubiq.online/docs/messaging/generating-ids/","url":"https://ubiq.online/docs/messaging/generating-ids/","name":"Generating Unique Ids","description":"","isPartOf":{"@id":"https://ubiq.online/#/schema/website/1"},"about":{"@id":"https://ubiq.online/#/schema/organization/1"},"datePublished":"2020-09-21T16:00:43CET","dateModified":"2023-10-09T14:24:45CET","breadcrumb":{"@id":"https://ubiq.online/docs/messaging/generating-ids/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://ubiq.online/docs/messaging/generating-ids/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://ubiq.online/docs/messaging/generating-ids/"]}]},{"@type":"BreadcrumbList","@id":"https://ubiq.online/docs/messaging/generating-ids/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://ubiq.online/","url":"https://ubiq.online/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://ubiq.online/docs/","url":"https://ubiq.online/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://ubiq.online/docs/messaging/","url":"https://ubiq.online/docs/messaging/","name":"Messaging"}},{"@type":"ListItem","position":4,"item":{"@id":"https://ubiq.online/docs/messaging/generating-ids/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://ubiq.online/#/schema/article/1","headline":"Generating Unique Ids","description":"","isPartOf":{"@id":"https://ubiq.online/docs/messaging/generating-ids/"},"mainEntityOfPage":{"@id":"https://ubiq.online/docs/messaging/generating-ids/"},"datePublished":"2020-09-21T16:00:43CET","dateModified":"2023-10-09T14:24:45CET","author":{"@id":"https://ubiq.online/#/schema/person/2"},"publisher":{"@id":"https://ubiq.online/#/schema/organization/1"},"image":{"@id":"https://ubiq.online/docs/messaging/generating-ids/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://ubiq.online/#/schema/person/2","name":"Nels Numan","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://ubiq.online/docs/messaging/generating-ids/#/schema/image/2","url":null,"contentUrl":null,"width":1826,"height":874,"caption":"Generating Unique Ids"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://ubiq.online/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ubiq.online/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ubiq.online/favicon-16x16.png><link rel=manifest href=https://ubiq.online/site.webmanifest></head><body class="single section docs"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Bootstrap>Ubiq</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Ubiq</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=https://ucl-vr.github.io/ubiq/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/showcase/>Showcase</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/blog/>Blog</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/publication/>Publications</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/teaching>Teaching</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle ps-0 py-1" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Contact
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></a><ul class="dropdown-menu dropdown-menu-main shadow rounded border-0" aria-labelledby=navbarDropdownMenuLink><li><a class=dropdown-item href=https://github.com/UCL-VR/ubiq/discussions/categories/q-a>↗ Ask a Question</a></li><li><a class=dropdown-item href=/contributors/>Contributors</a></li><li><a class=dropdown-item href=/media/>Media</a></li></ul></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://discord.gg/cZYzdcxAAB><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 128 128" fill="#000" stroke="currentcolor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-discord"><path d="M45.23 57.2c-6.16.0-11.17 5.6-11.17 12.48s5 12.47 11.17 12.47 11.16-5.59 11.16-12.47S51.38 57.2 45.23 57.2zm0 21c-4 0-7.17-3.8-7.17-8.47s3.21-8.48 7.17-8.48 7.16 3.8 7.16 8.48-3.21 8.42-7.16 8.42z"/><path d="M121.83 59.58a156.78 156.78.0 00-11.52-31 2.1 2.1.0 00-.71-.77 87.08 87.08.0 00-15.23-7.17C84.55 17.07 79.91 17 79.72 17a2 2 0 00-2 1.72l-.6 4.17a133.14 133.14.0 00-26.28.0l-.6-4.17a2 2 0 00-2-1.72c-.19.0-4.83.0-14.65 3.61A87.08 87.08.0 0018.4 27.81a2.1 2.1.0 00-.71.77 156.72 156.72.0 00-11.52 31C1 80.46.0 90.91.0 91.34a2 2 0 00.49 1.5 55.2 55.2.0 0018.2 12.74A76.32 76.32.0 0038.48 111a2 2 0 001.92-1l5.4-9.25A105.08 105.08.0 0064 102.24a105.08 105.08.0 0018.2-1.51L87.6 110a2 2 0 001.72 1h.2a76.32 76.32.0 0019.78-5.38 55.2 55.2.0 0018.2-12.74 2 2 0 00.49-1.5C128 90.91 127.05 80.46 121.83 59.58zm-14.06 42.31a76.76 76.76.0 01-17.39 4.92l-4.08-7c4.68-1.24 14.42-4.46 21.83-11.2a2 2 0 10-2.69-3c-9 8.23-22.46 10.84-22.6 10.87h-.06A96.59 96.59.0 0164 98.24a96.59 96.59.0 01-18.78-1.7h-.06c-.14.0-13.55-2.64-22.6-10.87a2 2 0 10-2.69 3c7.41 6.74 17.15 10 21.83 11.2l-4.08 7a76.08 76.08.0 01-17.39-4.92A52.24 52.24.0 014.08 90.8c.33-2.91 1.68-13.07 6-30.24A156.25 156.25.0 0121 30.92 88.17 88.17.0 0135 24.4a61.35 61.35.0 0111.58-3.19l.35 2.39c-4 1-13.85 3.86-21.65 9.53a2 2 0 102.36 3.23c8.82-6.41 21-9.06 21.86-9.25A118.4 118.4.0 0164 26.27a117.64 117.64.0 0114.51.84c.91.19 13 2.83 21.86 9.25a2 2 0 102.36-3.23c-7.8-5.67-17.61-8.52-21.65-9.53l.35-2.39A61.75 61.75.0 0193 24.4a88.17 88.17.0 0114 6.52 156.25 156.25.0 0111 29.64c4.29 17.17 5.64 27.33 6 30.24a52.24 52.24.0 01-16.23 11.09z"/><path d="M82.77 57.2c-6.15.0-11.16 5.6-11.16 12.48s5 12.47 11.16 12.47 11.17-5.59 11.17-12.47S88.93 57.2 82.77 57.2zm0 21c-4 0-7.16-3.8-7.16-8.47s3.21-8.48 7.16-8.48 7.17 3.8 7.17 8.48S86.73 78.15 82.77 78.15z"/></svg><small class="ms-2 d-md-none">Discord</small></a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/UCL-VR/ubiq/><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><div class="d-inline-flex me-auto placeholder-glow"><div id=search-placeholder aria-hidden=true><a href=# tabindex=-1 class="btn btn-light disabled placeholder"></a></div><div id=docsearch></div></div><span class="navbar-text fs-6 d-none d-sm-block">v0.2.0-alpha.4.</span>
<button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf647454e36069fd16f1a7a35cf6a865 aria-expanded=false>
Getting Started</button><div class=collapse id=section-bf647454e36069fd16f1a7a35cf6a865><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/getting-ubiq/>Getting Ubiq</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/setting-up-vr/>Setting Up Ubiq for XR</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/creating-networked-objects/>Creating Networked Objects</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/object-spawning/>Object Spawning</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/ownership/>Ownership</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/interaction-ubiq-xr/>Interaction with Ubiq XR</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/servers-rooms/>Servers and Rooms</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/local-loopback/>Testing with Local Loopback</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/logging/>Logging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-9aa1b03934893d7134a660af4204f2a9 aria-expanded=false>
Server</button><div class=collapse id=section-9aa1b03934893d7134a660af4204f2a9><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/server/server-setup/>Setting up the Server</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-61ee5a22cd5f14ed4e48eb5611031e74 aria-expanded=false>
Interaction</button><div class=collapse id=section-61ee5a22cd5f14ed4e48eb5611031e74><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/interaction/>XR Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/3dinteraction/>3D Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/2dinteraction/>2D Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/playercontroller/>Player Controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8db7df66ab1d7ab5f1dc947acdb5fae4 aria-expanded=false>
Logging</button><div class=collapse id=section-8db7df66ab1d7ab5f1dc947acdb5fae4><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/analysis/>Analysis</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/examples/>Examples</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/serialisation/serialisation/>Serialisation and Memory</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b54fa74b22da5a748eae3d55ad264199 aria-expanded=true>
Messaging</button><div class="collapse show" id=section-b54fa74b22da5a748eae3d55ad264199><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/ids/>Object and Component Ids</a></li><li><a class="docs-link rounded active" href=https://ubiq.online/docs/messaging/generating-ids/>Generating Unique Ids</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/types/>Types</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/reserveids/>Reserved IDs</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-d8621144cbc61520339c3b10c61731f0 aria-expanded=false>
WebRTC</button><div class=collapse id=section-d8621144cbc61520339c3b10c61731f0><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/webrtc/webrtc/>WebRTC and VOIP</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1ebdf9048046e5822bbd758458891444 aria-expanded=false>
Servers and Rooms</button><div class=collapse id=section-1ebdf9048046e5822bbd758458891444><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/server-overview/>Server Overview</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/heartbeat/>Heartbeat and Timeouts</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/leaving-joining/>Leaving and Joining</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-857371ebf58168027de2852c70452e5a aria-expanded=false>
Async Design Patterns</button><div class=collapse id=section-857371ebf58168027de2852c70452e5a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/async-design-patterns/design-pattern/>Design Pattern</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-a669003ea35aa39ca280b83bd259a032 aria-expanded=false>
Packaging</button><div class=collapse id=section-a669003ea35aa39ca280b83bd259a032><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/packaging/packaging/>Packaging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b6755d218d5f4e1cef9cce9cc39aeda9 aria-expanded=false>
Meta</button><div class=collapse id=section-b6755d218d5f4e1cef9cce9cc39aeda9><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/meta/docscommands/>MkDocs Commands</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf647454e36069fd16f1a7a35cf6a865 aria-expanded=false>
Getting Started</button><div class=collapse id=section-bf647454e36069fd16f1a7a35cf6a865><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/getting-ubiq/>Getting Ubiq</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/setting-up-vr/>Setting Up Ubiq for XR</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/creating-networked-objects/>Creating Networked Objects</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/object-spawning/>Object Spawning</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/ownership/>Ownership</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/interaction-ubiq-xr/>Interaction with Ubiq XR</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/servers-rooms/>Servers and Rooms</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/local-loopback/>Testing with Local Loopback</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/getting-started/logging/>Logging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-9aa1b03934893d7134a660af4204f2a9 aria-expanded=false>
Server</button><div class=collapse id=section-9aa1b03934893d7134a660af4204f2a9><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/server/server-setup/>Setting up the Server</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-61ee5a22cd5f14ed4e48eb5611031e74 aria-expanded=false>
Interaction</button><div class=collapse id=section-61ee5a22cd5f14ed4e48eb5611031e74><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/interaction/>XR Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/3dinteraction/>3D Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/2dinteraction/>2D Interaction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/interaction/playercontroller/>Player Controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8db7df66ab1d7ab5f1dc947acdb5fae4 aria-expanded=false>
Logging</button><div class=collapse id=section-8db7df66ab1d7ab5f1dc947acdb5fae4><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/analysis/>Analysis</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/examples/>Examples</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/logging/serialisation/serialisation/>Serialisation and Memory</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b54fa74b22da5a748eae3d55ad264199 aria-expanded=true>
Messaging</button><div class="collapse show" id=section-b54fa74b22da5a748eae3d55ad264199><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/ids/>Object and Component Ids</a></li><li><a class="docs-link rounded active" href=https://ubiq.online/docs/messaging/generating-ids/>Generating Unique Ids</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/types/>Types</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/messaging/reserveids/>Reserved IDs</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-d8621144cbc61520339c3b10c61731f0 aria-expanded=false>
WebRTC</button><div class=collapse id=section-d8621144cbc61520339c3b10c61731f0><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/webrtc/webrtc/>WebRTC and VOIP</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1ebdf9048046e5822bbd758458891444 aria-expanded=false>
Servers and Rooms</button><div class=collapse id=section-1ebdf9048046e5822bbd758458891444><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/server-overview/>Server Overview</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/heartbeat/>Heartbeat and Timeouts</a></li><li><a class="docs-link rounded" href=https://ubiq.online/docs/servers-and-rooms/leaving-joining/>Leaving and Joining</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-857371ebf58168027de2852c70452e5a aria-expanded=false>
Async Design Patterns</button><div class=collapse id=section-857371ebf58168027de2852c70452e5a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/async-design-patterns/design-pattern/>Design Pattern</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-a669003ea35aa39ca280b83bd259a032 aria-expanded=false>
Packaging</button><div class=collapse id=section-a669003ea35aa39ca280b83bd259a032><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/packaging/packaging/>Packaging</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b6755d218d5f4e1cef9cce9cc39aeda9 aria-expanded=false>
Meta</button><div class=collapse id=section-b6755d218d5f4e1cef9cce9cc39aeda9><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://ubiq.online/docs/meta/docscommands/>MkDocs Commands</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Quaternary navigation"><div class=page-links><h2 class=h3>On this page</h2><nav id=TableOfContents><ul><li><a href=#unique-ids>Unique Ids</a><ul><li><a href=#collision-probability>Collision Probability</a></li><li><a href=#generating-random-identifiers>Generating Random Identifiers</a></li><li><a href=#identifiers-and-bandwidth>Identifiers and Bandwidth</a></li><li><a href=#object-ids-in-ubiq>Object Ids in Ubiq</a></li><li><a href=#unique-ids-in-unity>Unique Ids in Unity</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Generating Unique Ids</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h2 class=h3>On this page</h2><nav id=TableOfContents><ul><li><a href=#unique-ids>Unique Ids</a><ul><li><a href=#collision-probability>Collision Probability</a></li><li><a href=#generating-random-identifiers>Generating Random Identifiers</a></li><li><a href=#identifiers-and-bandwidth>Identifiers and Bandwidth</a></li><li><a href=#object-ids-in-ubiq>Object Ids in Ubiq</a></li><li><a href=#unique-ids-in-unity>Unique Ids in Unity</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></nav><h2 id=unique-ids>Unique Ids<a href=#unique-ids class=anchor aria-hidden=true>#</a></h2><p>The main considerations of Object Ids are the practices for generating UUIds, collision probabilities and bit sizes.</p><h3 id=collision-probability>Collision Probability<a href=#collision-probability class=anchor aria-hidden=true>#</a></h3><p>Each client must be able to generate new Ids independently, to avoid dependencies on a server in peer-to-peer situations, and to avoid introducing deadlocks with the Unity programming model (such as needing a server to respond before all <code>Start()</code> calls can finish).</p><p>The probability of collisions between two independently well-generated identifiers is the <em>Birthday Problem</em>. The probability of a collision is given by,</p><p><img class="img-fluid lazyload blur-up" src=https://ubiq.online/docs/messaging/generating-ids/formula_hu23de32e7243a90d603feb75d5685711b_1399_20x0_resize_box_3.png data-src=https://ubiq.online/docs/messaging/generating-ids/formula.png width=141 height=45 alt=formula></p><p>On regular desktops, it is not possible to compute this for the typical numbers involved due to floating point quantisation. However there are approximations, such as the following which will work in Matlab,</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=nx>p</span> <span class=p>=</span> <span class=mi>1</span> <span class=o>-</span> <span class=nf>exp</span><span class=p>(</span><span class=o>-</span><span class=p>(</span><span class=nx>n</span><span class=p>^</span><span class=mi>2</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=mi>2</span><span class=o>*</span><span class=p>(</span><span class=mi>2</span><span class=p>^</span><span class=nx>b</span><span class=p>)))</span></code></pre></div></li></ul><p>As the figure below shows, the probability of collisions depends on the number of objects in the scenario <code>n</code>, as well as the identifier length <code>b</code> (in bits). In Ubiq, the &ldquo;scenario&rdquo; is typically a room.</p><p>There are no rules defining acceptable chances of collisions. For example, OAuth 2 specifies a probability of less than <code>10e-160</code>, which is not achievable even by 128-bit UUIDs.</p><p>In the case of a typical Ubiq room, which due to voice chat limitations can support approximately 25 users, a 32 bit value would probably be adequate. The concept of a Room in Ubiq can change depending on how it is used however, so Ubiq tries to avoid making assumptions about the potential collision space. If rooms were considered to be floating regions, for example, then the number of potential users could be much higher.</p><p>It is challenging to grasp levels of chance at these scales. The table below by Jeff Preshing presents collision probabilities with some more intuitive context. (The numer of hash values below is the number of Objects between all users that could potentially connect in a Ubiq scenario, be that a room, set of rooms, a server, shard etc.)</p><p><img class="img-fluid lazyload blur-up" src=https://ubiq.online/docs/messaging/generating-ids/scales_hud42eb4bcd3e264bc72c2986e1afb5de5_11081_20x0_resize_box_3.png data-src=https://ubiq.online/docs/messaging/generating-ids/scales.png width=520 height=421 alt=scales></p><h3 id=generating-random-identifiers>Generating Random Identifiers<a href=#generating-random-identifiers class=anchor aria-hidden=true>#</a></h3><p>The collision probabilities above are only correct if identifiers are well-generated.</p><p>RFC 4122 descibes algorithms to generate 128-bit UUIDs. UUIDs are standardised identifiers on many network services. They are very popular as they can be independently generated quickly, while guaranteeing uniqueness and being amenable to storing, sorting and hashing. UUIDs can guarantee uniqueness beyond the probabilities discussed above because some versions include the use of MAC addresses, which are centrally registered (by the network card manufacturer) and which act as a &ldquo;pre-shared secret&rdquo;.</p><p>RFC 4122 also presents an algorithm for version 4 which is based purely on random numbers. RFC 1750 discusses random numbers in more detail. Acquiring truly random numbers for identifier generation is challenging, as common computer systems rarely have APIs to access sources of truly random numbers. Most systems use deterministic generators of some kind, initialised with a seed. If there are dependencies between different sections of random number sequences, or covariances in the seed between peers, this will change the probability of collisions.</p><p>To make a good identifier, best practice is to use as many data sources as possible, with a strong mixing function. A strong mixer is one where each output bit is a complex, and different, function of all the input bits. The example given in RFC 4122 is to gather data sources into a buffer and use a message digest function such as SHA-1.</p><h3 id=identifiers-and-bandwidth>Identifiers and Bandwidth<a href=#identifiers-and-bandwidth class=anchor aria-hidden=true>#</a></h3><p>A motivation for minimising id size is to reduce overhead. In a packet sending a <code>Vector3</code> a 16 byte (a 128-bit UUID) overhead for the Id would have an overhead of 133% without even the Component Id. Though, on modern networks even a large relative overheads may not be problems so long as the total packet size is low. IPV6, for example, has a 40 byte header alone.</p><p>That is, reducing bandwidth by reducing identifier size is unlikely to be an optimal methodology. It should be expected that Ubiq header sizes increase over time, rather than decrease. Since Ubiq is based on a set of point-to-point connections, future works could consider techniques such as asymmetrical per-connection aliases to optimise bandwidth.</p><h3 id=object-ids-in-ubiq>Object Ids in Ubiq<a href=#object-ids-in-ubiq class=anchor aria-hidden=true>#</a></h3><h4 id=size>Size<a href=#size class=anchor aria-hidden=true>#</a></h4><p>Currently, Object Ids are represented by 64 bit numbers. This is because the collision probability for this length is very low for scenarios anticipated by Ubiq in the near future, but it is still easy to handle; 32 bit is too small, while 128 bit would require explicit serialisation/deserialisation, hashing and equality comparisons. 64 bit numbers can be stored in a <code>long</code> and nowadays even mobile platforms use 64 bit processors.</p><h3 id=unique-ids-in-unity>Unique Ids in Unity<a href=#unique-ids-in-unity class=anchor aria-hidden=true>#</a></h3><p>Unity provides a number of data sources for hashing inside the Application and SystemInfo classes, however these are not accessible in class constructors. Therefore the .NET System.Environment, System.DateTime and System.Random classes are used.</p><h3 id=references>References<a href=#references class=anchor aria-hidden=true>#</a></h3><ul><li><p>Jesus, P., Baquero, C., & Almeida, P. (2006). ID Generation in Mobile Environments. 1–4. <a href=http://hdl.handle.net/1822/36065>http://hdl.handle.net/1822/36065</a></p></li><li><p><a href=https://neilmadden.blog/2018/08/30/moving-away-from-uuids/>https://neilmadden.blog/2018/08/30/moving-away-from-uuids/</a></p></li><li><p><a href=https://preshing.com/20110504/hash-collision-probabilities/>https://preshing.com/20110504/hash-collision-probabilities/</a></p></li><li><p><a href=https://tools.ietf.org/html/rfc4122>https://tools.ietf.org/html/rfc4122</a></p></li></ul><p class=edit-page><a href=https://github.com/UCL-VR/ubiq-website/blob/master/content/docs/messaging/generating-ids/index.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/docs/servers-and-rooms/server-overview/><div class="card my-1"><div class="card-body py-2">&larr; Server Overview</div></div></a><a class=ms-auto href=/docs/servers-and-rooms/heartbeat/><div class="card my-1"><div class="card-body py-2">Heartbeat and Timeouts &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script data-goatcounter=https://ubiq.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=/js/bootstrap.min.fdbe9b9ba88a036135318f3c721784d684ac9e3280fe282cc80d7d49f7f9c82780cd54228c1608685a230c09984300d7946fc471734d566fcebc148b65bd16db.js integrity="sha512-/b6bm6iKA2E1MY88cheE1oSsnjKA/igsyA19Sff5yCeAzVQijBYIaFojDAmYQwDXlG/EcXNNVm/OvBSLZb0W2w==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.2a3ca603c4e5468838fb437bc036b9ddc036b6668b5dd45804f048229ea684f98f5928dd485b41db90e55aaa28b36600341f082d2726650a0a394250b6bf3ac1.js integrity="sha512-KjymA8TlRog4+0N7wDa53cA2tmaLXdRYBPBIIp6mhPmPWSjdSFtB25DlWqoos2YANB8ILScmZQoKOUJQtr86wQ==" crossorigin=anonymous defer></script>
<script src=/js/docsearch.min.8ac9e466dd63e5171a8d4a02b9ad668ff651952b76713125523401bbb1b2c79e11638f70cad4f969eff292608e518b7685c05c5bc33c898e872a1c559767b20e.js integrity="sha512-isnkZt1j5RcajUoCua1mj/ZRlSt2cTElUjQBu7Gyx54RY49wytT5ae/ykmCOUYt2hcBcW8M8iY6HKhxVl2eyDg==" crossorigin=anonymous defer></script>
<script src=/main.min.7692813ef22de5d343339990192d5774c0742a9334f8f57bb78245f5ab0e02861e3e47e7308e649ca0173ef9e307477de2769299fdb90a9e4a5e327df94553b7.js integrity="sha512-dpKBPvIt5dNDM5mQGS1XdMB0KpM0+PV7t4JF9asOAoYePkfnMI5knKAXPvnjB0d94naSmf25Cp5KXjJ9+UVTtw==" crossorigin=anonymous defer></script></body></html>