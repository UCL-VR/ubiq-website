<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://ubiq.online/fonts/vendor/nunito-sans/nunito-sans-v11-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://ubiq.online/fonts/vendor/nunito/nunito-v22-latin-700.woff2 type=font/woff2 crossorigin><script integrity="sha512-RBYr6Ld4w1yVqaACrgrBLQfPgGhj/1jyacA74WxJ1KM6KVcSWymwrdDwb3HDcdpwiNJ5yssot1He0U9vXoQVlg==">(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=/main.be2ac79d46942b3c1be9b102cb3f8714a31099e650d6d5c9d08f182ec3ddb8f751c2564f2274fddc98ae819330a1da887d17d15f3991255d9d7bf58ae0f3ed4f.css integrity="sha512-virHnUaUKzwb6bECyz+HFKMQmeZQ1tXJ0I8YLsPduPdRwlZPInT93JiugZMwodqIfRfRXzmRJV2de/WK4PPtTw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Server Scalability at DS-RT 23 Ubiq</title><meta name=description content="A post on our paper at DS-RT 23 and the topic of Scalability in Social VR"><link rel=canonical href=https://ubiq.online/blog/server-scalability-at-ds-rt-23/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Server Scalability at DS-RT 23"><meta property="og:description" content="A post on our paper at DS-RT 23 and the topic of Scalability in Social VR"><meta property="og:url" content="https://ubiq.online/blog/server-scalability-at-ds-rt-23/"><meta property="og:site_name" content="Ubiq"><meta property="article:published_time" content="2023-12-07T10:00:00+00:00"><meta property="article:modified_time" content="2025-03-05T15:55:44+00:00"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="640"><meta property="og:image:alt" content="Server Scalability at DS-RT 23"><meta property="og:image" content="https://ubiq.online/images/banner.png"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="640"><meta property="og:image:alt" content="Ubiq"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Server Scalability at DS-RT 23"><meta name=twitter:description content="A post on our paper at DS-RT 23 and the topic of Scalability in Social VR"><meta name=twitter:image content><meta name=twitter:image:alt content="Server Scalability at DS-RT 23"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://ubiq.online/#/schema/organization/1","name":"Ubiq","url":"https://ubiq.online/","sameAs":["https://github.com/UCL-VR/ubiq"],"logo":{"@type":"ImageObject","@id":"https://ubiq.online/#/schema/image/1","url":"https://ubiq.online/images/logos/ubiq-logo.png","width":512,"height":512,"caption":"Ubiq"},"image":{"@id":"https://ubiq.online/#/schema/image/1"}},{"@type":"WebSite","@id":"https://ubiq.online/#/schema/website/1","url":"https://ubiq.online/","name":"Ubiq","description":"A Unity networking library for research, teaching and development, maintained by the Virtual Environments and Computer Graphics group at UCL. Ubiq is 100% free and open source.","publisher":{"@id":"https://ubiq.online/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/","url":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/","name":"Server Scalability at DS-RT 23","description":"A post on our paper at DS-RT 23 and the topic of Scalability in Social VR","isPartOf":{"@id":"https://ubiq.online/#/schema/website/1"},"about":{"@id":"https://ubiq.online/#/schema/organization/1"},"datePublished":"2023-12-07T10:00:00CET","dateModified":"2025-03-05T15:55:44CET","breadcrumb":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://ubiq.online/blog/server-scalability-at-ds-rt-23/"]}]},{"@type":"BreadcrumbList","@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://ubiq.online/","url":"https://ubiq.online/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://ubiq.online/blog/","url":"https://ubiq.online/blog/","name":"Blog"}},{"@type":"ListItem","position":3,"item":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://ubiq.online/#/schema/article/1","headline":"Server Scalability at DS-RT 23","description":"A post on our paper at DS-RT 23 and the topic of Scalability in Social VR","isPartOf":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/"},"mainEntityOfPage":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/"},"datePublished":"2023-12-07T10:00:00CET","dateModified":"2025-03-05T15:55:44CET","author":{"@id":"https://ubiq.online/#/schema/person/2"},"publisher":{"@id":"https://ubiq.online/#/schema/organization/1"},"image":{"@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://ubiq.online/#/schema/person/2","name":"Nels Numan","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://ubiq.online/blog/server-scalability-at-ds-rt-23/#/schema/image/2","url":null,"contentUrl":null,"width":1826,"height":874,"caption":"Server Scalability at DS-RT 23"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://ubiq.online/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ubiq.online/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ubiq.online/favicon-16x16.png><link rel=manifest href=https://ubiq.online/site.webmanifest></head><body class="single section blog"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Bootstrap>Ubiq</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Ubiq</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://ucl-vr.github.io/ubiq/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/showcase/>Showcase</a></li><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/blog/>Blog</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/publication/>Publications</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/teaching>Teaching</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle ps-0 py-1" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Contact
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></a><ul class="dropdown-menu dropdown-menu-main shadow rounded border-0" aria-labelledby=navbarDropdownMenuLink><li><a class=dropdown-item href=https://github.com/UCL-VR/ubiq/discussions/categories/q-a>â†— Ask a Question</a></li><li><a class=dropdown-item href=/contributors/>Contributors</a></li><li><a class=dropdown-item href=/media/>Media</a></li></ul></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://discord.gg/cZYzdcxAAB><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 128 128" fill="#000" stroke="currentcolor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-discord"><path d="M45.23 57.2c-6.16.0-11.17 5.6-11.17 12.48s5 12.47 11.17 12.47 11.16-5.59 11.16-12.47S51.38 57.2 45.23 57.2zm0 21c-4 0-7.17-3.8-7.17-8.47s3.21-8.48 7.17-8.48 7.16 3.8 7.16 8.48-3.21 8.42-7.16 8.42z"/><path d="M121.83 59.58a156.78 156.78.0 00-11.52-31 2.1 2.1.0 00-.71-.77 87.08 87.08.0 00-15.23-7.17C84.55 17.07 79.91 17 79.72 17a2 2 0 00-2 1.72l-.6 4.17a133.14 133.14.0 00-26.28.0l-.6-4.17a2 2 0 00-2-1.72c-.19.0-4.83.0-14.65 3.61A87.08 87.08.0 0018.4 27.81a2.1 2.1.0 00-.71.77 156.72 156.72.0 00-11.52 31C1 80.46.0 90.91.0 91.34a2 2 0 00.49 1.5 55.2 55.2.0 0018.2 12.74A76.32 76.32.0 0038.48 111a2 2 0 001.92-1l5.4-9.25A105.08 105.08.0 0064 102.24a105.08 105.08.0 0018.2-1.51L87.6 110a2 2 0 001.72 1h.2a76.32 76.32.0 0019.78-5.38 55.2 55.2.0 0018.2-12.74 2 2 0 00.49-1.5C128 90.91 127.05 80.46 121.83 59.58zm-14.06 42.31a76.76 76.76.0 01-17.39 4.92l-4.08-7c4.68-1.24 14.42-4.46 21.83-11.2a2 2 0 10-2.69-3c-9 8.23-22.46 10.84-22.6 10.87h-.06A96.59 96.59.0 0164 98.24a96.59 96.59.0 01-18.78-1.7h-.06c-.14.0-13.55-2.64-22.6-10.87a2 2 0 10-2.69 3c7.41 6.74 17.15 10 21.83 11.2l-4.08 7a76.08 76.08.0 01-17.39-4.92A52.24 52.24.0 014.08 90.8c.33-2.91 1.68-13.07 6-30.24A156.25 156.25.0 0121 30.92 88.17 88.17.0 0135 24.4a61.35 61.35.0 0111.58-3.19l.35 2.39c-4 1-13.85 3.86-21.65 9.53a2 2 0 102.36 3.23c8.82-6.41 21-9.06 21.86-9.25A118.4 118.4.0 0164 26.27a117.64 117.64.0 0114.51.84c.91.19 13 2.83 21.86 9.25a2 2 0 102.36-3.23c-7.8-5.67-17.61-8.52-21.65-9.53l.35-2.39A61.75 61.75.0 0193 24.4a88.17 88.17.0 0114 6.52 156.25 156.25.0 0111 29.64c4.29 17.17 5.64 27.33 6 30.24a52.24 52.24.0 01-16.23 11.09z"/><path d="M82.77 57.2c-6.15.0-11.16 5.6-11.16 12.48s5 12.47 11.16 12.47 11.17-5.59 11.17-12.47S88.93 57.2 82.77 57.2zm0 21c-4 0-7.16-3.8-7.16-8.47s3.21-8.48 7.16-8.48 7.17 3.8 7.17 8.48S86.73 78.15 82.77 78.15z"/></svg><small class="ms-2 d-md-none">Discord</small></a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/UCL-VR/ubiq/><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><div class="wrap container-xxl" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>Server Scalability at DS-RT 23</h1><p><small>Posted December 7, 2023 by <a class="stretched-link position-relative" href=/contributors/sebastian-friston/>Sebastian Friston</a>, <a class="stretched-link position-relative" href=/contributors/otto-olkkonen/>Otto Olkkonen</a>, <a class="stretched-link position-relative" href=/contributors/ben-congdon/>Ben Congdon</a>, <a class="stretched-link position-relative" href=/contributors/anthony-steed/>Anthony Steed</a>&nbsp;&dash;&nbsp;<strong>9&nbsp;min read</strong></small><p></div><p class=lead>At DS-RT 23 we presented Exploring Server-Centric Scalability for Social VR, an investigation into the performance of Ubiq's server, and the potential to scale to larger sessions.</p><p>Ubiq is logically Peer to Peer, but when communicating over the public internet the Ubiq server is used as a hub. Messages from rooms are duplicated or &ldquo;fanned-out&rdquo;. This implementation is simple and robust, but can create a choke-point when large numbers of users congregate in one room: and this is what the paper is focused on.</p><p>To see why this is, and understand <a href=https://doi.org/10.1109/DS-RT58998.2023.00016>the paper</a>&rsquo;s goals, we need a wider view of scalability in social VR&mldr;</p><h3 id=shared-states>Shared States</h3><p>All collaborative applications and games, including Social VR, are based on users having the same mental model of the world.</p><p>If both users imagine the state and rules of the world the same way, their actions will make sense to one another. If their mental models diverge, the world is no longer shared. Each player sees the others interacting with a world they cannot comprehend. This is useless for communication, and in competitive games can appear unfair.</p><p>A simple example is &ldquo;<a href=https://www.vice.com/en/article/935gn7/counter-strike-cheat-players-see-through-walls>wall hacks</a>&rdquo; in games like Counter-Strike, where one player uses exploits to see through walls and gain an advantage over others. In this case players are seeing different things because their software is doing different things.</p><p>Another example is where two players have different latencies, e.g. in Fighting Games. The player with a lower latency can execute moves more quickly than their opponent, gaining an advantage. This isn&rsquo;t due to the software itself, but the infrastructure of the internet. Fighting Games use a <a href=https://arstechnica.com/gaming/2019/10/explaining-how-fighting-games-use-delay-based-and-rollback-netcode/>variety of methods</a> to counteract the effects of latency for precisely this reason.</p><p><figure class=figure><img class="figure-img img-fluid lazyload blur-up" data-sizes=auto src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_20x0_resize_box_3.png data-srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_500x0_resize_box_3.png 500w" width=1321 height=742 alt="Illustration of Fighting Game latency"><noscript><img class="figure-img img-fluid" sizes=100vw srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game_hub4124bbdc33a1510b64b2402b002ef52_1683018_500x0_resize_box_3.png 500w" src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/fighting_game.png width=1321 height=742 alt="Illustration of Fighting Game latency"></noscript></figure><em>Illustration of Latency in a Fighting Game (Source: Ricky Pusch, ArsTechnica, 2019)</em></p><p>To ensure users have a consistent view of the world, changes made by one Peer need to be communicated to all the others as fast as possible.</p><h4 id=scalability>Scalability</h4><p>As real networks have latency, the <em>fastest</em> way to do this is to make each client send a message
directly to every other in a mesh pattern.</p><p><figure class=figure><img class="figure-img img-fluid lazyload blur-up" data-sizes=auto src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_20x0_resize_box_3.png data-srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_500x0_resize_box_3.png 500w" width=884 height=554 alt="A diagram of an N-to-N Mesh"><noscript><img class="figure-img img-fluid" sizes=100vw srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh_hu558d172b0e6a749da936e00b0a40253e_28666_500x0_resize_box_3.png 500w" src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/mesh.png width=884 height=554 alt="A diagram of an N-to-N Mesh"></noscript></figure></p><p>However, as the number of clients grows, the number of connections and messages sent grows exponentially, and soon the resources of the network and PCs will be overwhelmed.</p><p>For all but the trivial group sizes, the number of messages exchanged must be reduced somehow.</p><p>One way to do this is to put the game logic on a server. Now each client communicates with one machine, which runs the game, and sends one response.</p><p>Client-server architecture is about more than just scale. A dedicated server is a source of authority, helping to prevent cheating, as one example, and this architecture has many <a href=https://www.amazon.co.uk/Networked-Graphics-Building-Virtual-Environments/dp/0123744237>more implications</a> as well.</p><p>What it cannot do however, is scale infinitely.</p><p>To create sessions with users beyond the capacity of one server, the servers themselves have to be connected and exchange messages, and we are back to the fundamental trade-off in social VR:</p><p><strong>The architecture must aggregate and compress messages to keep the total bandwidth down - but every time this is done it introduces latency, and removes information.</strong></p><p>For example, to get spatialised audio, a Peer needs (1) audio streams, and (2) locations, from every other Peer around them, so those streams can be mixed in way that gives the listener the right impression of where those peers are.</p><p>A single PC or Quest cannot mix the streams of 1000, or even 100, other players and do anything else at the same time. In this case we&rsquo;d use dedicated servers to uniformly mix audio streams, and send one copy of this mix to each player. This is how larger video-conferences work. The processing has been offloaded and the message count is reduced, but now players all hear the same mix regardless of where they are: we&rsquo;ve lost spatialisation.</p><p>This challenge is present for every modality in VR, and each one has to be handled differently.</p><h3 id=crowds>Crowds</h3><p>An obvious question given these challenges, is how do SVRs like Horizon Venues or MMORPGs like World of Warcraft solve them?</p><p>The simple answer is, that they don&rsquo;t, not really. Games like World of Warcraft use <a href=https://wowpedia.fandom.com/wiki/Sharding_(term)><em>sharding</em></a> where users are partitioned into different copies of the world running on different servers. Users in different copies cannot interact however.</p><p>When Travis Scott <a href=https://www.theverge.com/2020/4/23/21233637/travis-scott-fortnite-concert-astronomical-live-report>performed in Fortnite</a> to <a href=https://www.marketingdive.com/news/fortnite-virtual-rap-concert-draws-record-123m-attendees/576781>12.3 million</a> people, this was done by broadcasting to multiple servers. Users saw real attendees on their local server, but not all attendees actually shared the same space.</p><p><figure class=figure><img class="figure-img img-fluid lazyload blur-up" data-sizes=auto src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_20x0_resize_box_3.png data-srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_500x0_resize_box_3.png 500w" width=1144 height=643 alt="First person view of Fortnite&amp;rsquo;s Travis Scott Concert"><noscript><img class="figure-img img-fluid" sizes=100vw srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite_hu5288f50fba1850477320efb1eda47ede_866487_500x0_resize_box_3.png 500w" src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/scott_fortnite.png width=1144 height=643 alt="First person view of Fortnite&amp;rsquo;s Travis Scott Concert"></noscript></figure><em>First person view of Fortnite&rsquo;s Travis Scott Concert. (Source: <a href=https://www.linkedin.com/pulse/future-entertainment-immersive-experiences-through-technology-silva/>Mariana P. Silva, 2021</a>)</em></p><p>Yet, the immense success of these events (not to mention technical challenges even of &ldquo;just&rdquo; broadcasting them) show that there is a real demand for social situations well beyond the small group interactions of contemporary social VR, and maybe beyond what would even be possible in the real world&mldr;</p><p>Each game or platform can use different tricks to give the illusion of scale, depending on its purpose.</p><p>(Eve Online is rather unique in that it actually does connect 1000&rsquo;s of players in the same space - however it does so by <a href=https://www.eveonline.com/news/view/introducing-time-dilation-tidi>slowing down the simulation</a> as needed, not something you&rsquo;d want to experience in VR!)</p><h3 id=peer-to-peer-and-server-fanout>Peer To Peer and Server Fanout</h3><p>Ubiq&rsquo;s Peer to Peer architecture was chosen for a few reasons.</p><p>First is its flexibility: client-server patterns can be implemented on top of P2P but not vice-versa. Second, it is more accessible for smaller teams - there is no need to maintain a client & server version of the application.</p><p>Finally, the underlying network infrastructure can be swapped out, and applications will continue to work.</p><p>We could replace the server with <a href=http://www.steves-internet-guide.com/introduction-multicasting/>broadcasting or multicasting</a>, for example, without changing the design of any Networked Components.</p><p>Multicasting <a href=https://doi.org/10.1109/VRAIS.1995.512473>was proposed</a> for huge distributed simulations as early as 1995. In this case, messages are replicated in the network hardware itself at Layer 3 or 4, massively increasing the capacity of the network, and so session size.</p><p>Unfortunately, support for multicasting on the public internet is not reliable, and though it increases the capacity, at some user count, we&rsquo;d still need aggregation and compression.</p><p>Ubiq&rsquo;s server was built in full knowledge that the capacity of each room is limited, and that to scale to 100s and 1000s of users, that additional systems will need to be built.</p><p>In our recent paper, we took the first steps towards this, by trying to understand the current limits of the server, and the implications of different relay & routing models that might improve it.</p><h3 id=bots>Bots</h3><p>To perform this investigation, we used Ubiq&rsquo;s <a href=https://ucl-vr.github.io/ubiq/botssample/>Bots</a> functionality. Bots are computer controlled Peers that can join a room, transmit and receive audio, and move around. Multiple Bots can exist in one Unity process, but each Bot has its own <code>NetworkScene</code> and from the system&rsquo;s point of view is indistinguishable from a user (even when running in the same process as other users or Bots).</p><p>You can begin to explore the Bots in the <a href=https://ucl-vr.github.io/ubiq/botssample/>Bots Samples</a>.</p><p>For this experiment we added some Editor Tools that could spin up multiple processes, each with multiple Bots, on AWS VMs, and remote-control them.</p><p>For this remote control we used Ubiq as well: each process had a <code>NetworkScene</code> dedicated to spawning Bots. Each Bot had its own <code>NetworkScene</code> for its role as a Peer. The two Peer Groups were completely separate and talked to different servers, but used shared Unity processes to communicate for remote control.</p><p><figure class=figure><img class="figure-img img-fluid lazyload blur-up" data-sizes=auto src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_20x0_resize_box_3.png data-srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_500x0_resize_box_3.png 500w" width=854 height=484 alt="A diagram of an N-to-N Mesh"><noscript><img class="figure-img img-fluid" sizes=100vw srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing_hu41b41e4c25d6967983b3e9c095ed16f6_180024_500x0_resize_box_3.png 500w" src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/sharing.png width=854 height=484 alt="A diagram of an N-to-N Mesh"></noscript></figure></p><h3 id=experiments>Experiments</h3><p>We first benchmarked the server to establish a baseline. The headline number is that about 30-40 Peers can be supported in one room with our current configuration.</p><p>We then set out to see how partitioning approaches could improve the capacity of a session.</p><p>The idea behind a partitioning scheme is that only a subset of Peers actually communicate, but that these groups aren&rsquo;t symmetrical.</p><p>Imagine in a large crowd, you can talk to the two people closest to you, but no-one else. Those people you can speak with are close to you, but may not be close to <em>eachother</em>. This is KNN - or K Nearest Neighbour.</p><p>If you shared news with one person, and they repeated it to their other neighbour, your information moves through the groups and might eventually reach everyone in the session. However, the way it moves and is transformed is very different to if you&rsquo;d just announced it to everyone yourself&mldr;</p><p>There are trade-offs to every partitioning scheme.</p><p>The other scheme we considered is a Hex-Based Spatial Partitioning.</p><p><figure class=figure><img class="figure-img img-fluid lazyload blur-up" data-sizes=auto src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_20x0_resize_box_3.png data-srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_500x0_resize_box_3.png 500w" width=2048 height=1103 alt="Illustration of Peer Counts in a Hex Grid Configuration"><noscript><img class="figure-img img-fluid" sizes=100vw srcset="https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_900x0_resize_box_3.png 900w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_800x0_resize_box_3.png 800w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_700x0_resize_box_3.png 700w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_600x0_resize_box_3.png 600w,https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition_huc8fd12e1c38f0dfe71f03c9758f8997c_1682731_500x0_resize_box_3.png 500w" src=https://ubiq.online/blog/server-scalability-at-ds-rt-23/hex_grid_partition.png width=2048 height=1103 alt="Illustration of Peer Counts in a Hex Grid Configuration"></noscript></figure></p><p>Neither scheme is a silver-bullet however: implementing such schemes do not make Social VR &lsquo;scale&rsquo;. As we saw with the audio example, schemes need to be chosen and tuned per-modality.</p><p>The purpose of these experiments was to understand the effect of those schemes on server capacity, so that maybe in the future they <em>could be</em> applied to certain problems.</p><p>In the paper, we actually incorporate this into our experiments.</p><p>The Bots are not just used to generate traffic, but behave like Boids and so influence each others behaviour. Since Boid behaviour can be modelled, we can capture the motion of the Bots and see how it changes under different partitioning schemes.</p><p>These simple Boids don&rsquo;t generalise to real user behaviour, but they clearly illustrate that schemes aren&rsquo;t just about message rates, but also timing and mutual visibility: all of these affect information propagation, and so behaviour.</p><h3 id=conclusion>Conclusion</h3><p>Our experiments showed that both partitioning schemes significantly improved fanout capacity. This is not a surprise, as we know both ultimately reduce message rates.</p><p>Understanding how they do so however is important.</p><p>To build scalable VR, some type of aggregation and compression will be needed, and it will have to be modality specific.</p><p>A scalable system supporting real concert sized crowds will involve a hierarchy of processes for combing, replicating or forwarding messages from different sized clusters of machines above and below, as information moves up and down the hierarchy, between users at varying distances, roles and attentions.</p><p>This is a huge challenge, and this paper is only a tiny part of it, but unlocking all the social situations enabled by having a system that can do it for real, will be well worth it.</p><h3 id=paper>Paper</h3><blockquote><p>S. Friston, O. Olkkonen, B. Congdon and A. Steed, &ldquo;Exploring Server-Centric Scalability for Social VR,&rdquo; 2023 IEEE/ACM 27th International Symposium on Distributed Simulation and Real Time Applications (DS-RT), Singapore, Singapore, 2023, pp. 56-65, doi: 10.1109/DS-RT58998.2023.00016.</p></blockquote><p>Is <a href=https://discovery.ucl.ac.uk/id/eprint/10182150/>available Open Access from UCL</a></p></article></div></div></div></div><section class="section section-sm mt-n5 mb-3"><div class=container><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"></div></div></div></section><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script data-goatcounter=https://ubiq.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=/js/bootstrap.min.fdbe9b9ba88a036135318f3c721784d684ac9e3280fe282cc80d7d49f7f9c82780cd54228c1608685a230c09984300d7946fc471734d566fcebc148b65bd16db.js integrity="sha512-/b6bm6iKA2E1MY88cheE1oSsnjKA/igsyA19Sff5yCeAzVQijBYIaFojDAmYQwDXlG/EcXNNVm/OvBSLZb0W2w==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.2a3ca603c4e5468838fb437bc036b9ddc036b6668b5dd45804f048229ea684f98f5928dd485b41db90e55aaa28b36600341f082d2726650a0a394250b6bf3ac1.js integrity="sha512-KjymA8TlRog4+0N7wDa53cA2tmaLXdRYBPBIIp6mhPmPWSjdSFtB25DlWqoos2YANB8ILScmZQoKOUJQtr86wQ==" crossorigin=anonymous defer></script>
<script src=/main.min.7692813ef22de5d343339990192d5774c0742a9334f8f57bb78245f5ab0e02861e3e47e7308e649ca0173ef9e307477de2769299fdb90a9e4a5e327df94553b7.js integrity="sha512-dpKBPvIt5dNDM5mQGS1XdMB0KpM0+PV7t4JF9asOAoYePkfnMI5knKAXPvnjB0d94naSmf25Cp5KXjJ9+UVTtw==" crossorigin=anonymous defer></script></body></html>